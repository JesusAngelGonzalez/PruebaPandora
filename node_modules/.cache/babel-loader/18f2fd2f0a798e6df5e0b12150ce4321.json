{"ast":null,"code":"var _jsxFileName = \"/home/jesus/PS3/PruebaPandora/src/components/Header/LoginForm.js\";\nimport React from 'react';\nimport { history, mailValidation, passwValidation } from '../../utils';\nimport { Usuario, setToken } from '../../agent';\nimport './LoginForm.css';\n\nclass LoginForm extends React.Component {\n  constructor(props) {\n    super(props);\n    this.setUser = props.setUser;\n    this.li = props.li_item;\n    this.state = {\n      user: '',\n      password: ''\n    };\n    this.handleChangeUser = this.handleChangeUser.bind(this);\n    this.handleChangePass = this.handleChangePass.bind(this);\n    this.handleSubmit = this.handleSubmit.bind(this);\n  }\n\n  handleChangeUser(event) {\n    this.setState({\n      user: event.target.value\n    });\n  }\n\n  handleChangePass(event) {\n    this.setState({\n      password: event.target.value\n    });\n  }\n\n  async handleSubmit(event) {\n    event.preventDefault();\n\n    if (mailValidation(this.state.user)) {\n      if (passwValidation(this.state.password)) {\n        let x = await Usuario.login(this.state.user, this.state.password); //console.log(x);\n\n        if (x.status === 200) {\n          //console.log('Login:{user:', this.state.user, \";password:\", this.state.password, \"}\");\n          let token = x.token.replace('Bearer ', '');\n          setToken(token);\n          this.setUser({\n            user: {\n              mail: this.state.user,\n              password: this.state.password,\n              token: token\n            }\n          });\n          history.push('/welcome');\n        } else {\n          window.alert('Error ' + x.status + '\\n' + x.statusText);\n        }\n      } else {\n        window.alert('Contraseña no válida');\n      }\n    } else {\n      window.alert('Email no válido');\n    }\n  }\n\n  render() {\n    return React.createElement(\"form\", {\n      onSubmit: this.handleSubmit,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 58\n      },\n      __self: this\n    }, React.createElement(\"li\", {\n      className: \"input-label\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 59\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: this.li + \" input-group\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 60\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      className: this.state.user !== \"\" ? \"label-active\" : null,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 61\n      },\n      __self: this\n    }, \"Usuario\"), React.createElement(\"input\", {\n      type: \"text\",\n      value: this.state.user,\n      onChange: this.handleChangeUser,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 64\n      },\n      __self: this\n    }))), React.createElement(\"li\", {\n      className: \"input-label\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 67\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: this.li + \" input-group\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 68\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      className: this.state.password !== \"\" ? \"label-active\" : null,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 69\n      },\n      __self: this\n    }, \"Contrase\\xF1a\"), React.createElement(\"input\", {\n      type: \"password\",\n      value: this.state.password,\n      onChange: this.handleChangePass,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 72\n      },\n      __self: this\n    }))), React.createElement(\"li\", {\n      className: this.li,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 75\n      },\n      __self: this\n    }, React.createElement(\"button\", {\n      type: \"submit\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 76\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      className: \"fas fa-sign-in-alt\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77\n      },\n      __self: this\n    }), \" Iniciar Sesi\\xF3n\")));\n  }\n\n}\n\nexport default LoginForm;","map":{"version":3,"sources":["/home/jesus/PS3/PruebaPandora/src/components/Header/LoginForm.js"],"names":["React","history","mailValidation","passwValidation","Usuario","setToken","LoginForm","Component","constructor","props","setUser","li","li_item","state","user","password","handleChangeUser","bind","handleChangePass","handleSubmit","event","setState","target","value","preventDefault","x","login","status","token","replace","mail","push","window","alert","statusText","render"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { history, mailValidation, passwValidation } from '../../utils';\nimport { Usuario, setToken } from '../../agent';\nimport './LoginForm.css';\n\nclass LoginForm extends React.Component {\n  constructor(props) {\n    super(props);\n    this.setUser = props.setUser;\n    this.li = props.li_item;\n    this.state = {\n      user: '',\n      password: ''\n    };\n\n    this.handleChangeUser = this.handleChangeUser.bind(this);\n    this.handleChangePass = this.handleChangePass.bind(this);\n    this.handleSubmit = this.handleSubmit.bind(this);\n  }\n\n  handleChangeUser(event) {\n    this.setState({ user: event.target.value });\n  }\n  handleChangePass(event) {\n    this.setState({ password: event.target.value });\n  }\n\n  async handleSubmit(event) {\n    event.preventDefault();\n\n    if (mailValidation(this.state.user)){\n      if (passwValidation(this.state.password)) {\n        let x = await Usuario.login(this.state.user, this.state.password);\n        //console.log(x);\n        if (x.status === 200){\n          //console.log('Login:{user:', this.state.user, \";password:\", this.state.password, \"}\");\n          let token = x.token.replace('Bearer ', '');\n          setToken(token);\n          this.setUser({ user: {\n            mail: this.state.user,\n            password: this.state.password,\n            token: token\n          }});\n          history.push('/welcome');\n        } else {\n          window.alert('Error ' + x.status + '\\n' + x.statusText);\n        }\n      } else {\n        window.alert('Contraseña no válida');\n      }\n    } else {\n      window.alert('Email no válido');\n    }\n  }\n\n  render() {\n    return (\n      <form onSubmit={this.handleSubmit}>\n        <li className=\"input-label\">\n          <div className={this.li + \" input-group\"}>\n            <label className={this.state.user!==\"\" ? \"label-active\":null}>\n              Usuario\n            </label>\n            <input type=\"text\" value={this.state.user} onChange={this.handleChangeUser}/>\n          </div>\n        </li>\n        <li className=\"input-label\">\n          <div className={this.li + \" input-group\"}>\n            <label className={this.state.password!==\"\" ? \"label-active\":null}>\n              Contraseña\n            </label>\n            <input type=\"password\" value={this.state.password} onChange={this.handleChangePass}/>\n          </div>\n        </li>\n        <li className={this.li}>\n          <button type=\"submit\" >\n            <span className=\"fas fa-sign-in-alt\"/> Iniciar Sesión\n          </button>\n        </li>\n      </form>\n    );\n  }\n}\n\n\nexport default LoginForm;\n"]},"metadata":{},"sourceType":"module"}